<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<title>Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ù„Ø§ØªØ§Ø±ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ</title>
<style>
  body{background:#0e1625;color:#f5f5f5;font-family:system-ui;padding:20px;direction:rtl}
  .box{background:#141d2f;padding:15px;border-radius:12px;max-width:800px;margin:auto}
  input,select{padding:6px 10px;border-radius:6px;border:none;background:#1f2a40;color:#fff;margin-bottom:8px;width:100%}
  label{display:block;margin-top:10px;color:#ccc}
  button{padding:8px 16px;border:none;border-radius:8px;margin-top:8px;cursor:pointer;font-weight:bold}
  button#start{background:#ffb400;color:#222}
  button#stop{background:#333;color:#ccc}
  .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:8px;margin-top:10px}
  .stat{background:#1d2942;padding:10px;border-radius:8px;text-align:center}
  .stat h3{font-size:13px;margin:0;color:#aaa}
  .stat div{font-size:18px;font-weight:bold;margin-top:4px}
</style>
</head>
<body>
<div class="box">
  <h2>ğŸ² Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ù„Ø§ØªØ§Ø±ÛŒ (Ø´Ø§Ù†Ø³ Ù…Ø³Ø§ÙˆÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¹Ø¯Ø¯)</h2>

  <label>Ø¨Ø§Ø²Ù‡ Ø§Ø¹Ø¯Ø§Ø¯ (Û± ØªØ§):</label>
  <input type="number" id="maxNumber" value="35">

  <label>ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¹Ø¯Ø§Ø¯ Ù‡Ø± Ø¨Ù„ÛŒØ·:</label>
  <input type="number" id="countPerTicket" value="5">

  <label>Ø­Ø§Ù„Øª Ù†ØªÛŒØ¬Ù‡ Ù„Ø§ØªØ§Ø±ÛŒ:</label>
  <select id="targetMode">
    <option value="random">Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ø¯ÙˆÙ… Ø®ÙˆØ¯Ú©Ø§Ø±</option>
    <option value="manual">ÙˆØ±ÙˆØ¯ÛŒ Ø¯Ø³ØªÛŒ</option>
  </select>

  <label>Ø§Ø¹Ø¯Ø§Ø¯ Ù‡Ø¯Ù (Ø§Ú¯Ø± Ø¯Ø³ØªÛŒØŒ Ø¨Ø§ Ú©Ø§Ù…Ø§):</label>
  <input type="text" id="targetInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: 2,7,14,25,30">

  <label>Ù‚ÛŒÙ…Øª Ù‡Ø± Ø¨Ù„ÛŒØ·:</label>
  <input type="number" id="ticketPrice" value="1000">

  <label>Ø¬ÙˆØ§ÛŒØ²:</label>
  <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px">
    <input type="number" id="prize2" value="2000" placeholder="2ØªØ§ÛŒÛŒ">
    <input type="number" id="prize3" value="10000" placeholder="3ØªØ§ÛŒÛŒ">
    <input type="number" id="prize4" value="50000" placeholder="4ØªØ§ÛŒÛŒ">
    <input type="number" id="prize5" value="1000000" placeholder="5ØªØ§ÛŒÛŒ (Ø¬Ú©â€ŒÙ¾Ø§Øª)">
  </div>

  <button id="setTarget">ğŸ¯ ØªÙˆÙ„ÛŒØ¯ Ù†ØªÛŒØ¬Ù‡ Ù„Ø§ØªØ§Ø±ÛŒ</button>
  <div id="targetDisplay" style="margin:8px 0;color:#ffd166"></div>

  <button id="start">â–¶ Ø´Ø±ÙˆØ¹</button>
  <button id="stop">â¹ ØªÙˆÙ‚Ù</button>

  <div class="stats">
    <div class="stat"><h3>Ø¨Ù„ÛŒØ·â€ŒÙ‡Ø§</h3><div id="tickets">0</div></div>
    <div class="stat"><h3>Û²ØªØ§ÛŒÛŒ</h3><div id="c2">0</div></div>
    <div class="stat"><h3>Û³ØªØ§ÛŒÛŒ</h3><div id="c3">0</div></div>
    <div class="stat"><h3>Û´ØªØ§ÛŒÛŒ</h3><div id="c4">0</div></div>
    <div class="stat"><h3>ÛµØªØ§ÛŒÛŒ</h3><div id="c5">0</div></div>
    <div class="stat"><h3>Ø®Ø±Ø¬â€ŒØ´Ø¯Ù‡</h3><div id="spent">0</div></div>
    <div class="stat"><h3>Ù¾Ø±Ø¯Ø§Ø®ØªÛŒ</h3><div id="paid">0</div></div>
    <div class="stat"><h3>Ø®Ø§Ù„Øµ</h3><div id="net">0</div></div>
  </div>
</div>

<script>
let running = false;
let stats = {t:0,c2:0,c3:0,c4:0,c5:0,spent:0,paid:0};
let target = new Set();

function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}

// Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ Ø¨Ø¯ÙˆÙ† ØªÚ©Ø±Ø§Ø± Ø¨Ø§ Ø§Ø­ØªÙ…Ø§Ù„ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…Ø³Ø§ÙˆÛŒ
function randomCombination(n,k){
  const result = [];
  const chosen = new Set();
  while(result.length < k){
    const r = randInt(1,n);
    if(!chosen.has(r)){
      chosen.add(r);
      result.push(r);
    }
  }
  return result;
}

function pickTarget(){
  const mode = document.getElementById('targetMode').value;
  const n = +document.getElementById('maxNumber').value;
  const k = +document.getElementById('countPerTicket').value;
  if(mode === 'manual'){
    const arr = document.getElementById('targetInput').value.split(',')
      .map(x=>parseInt(x.trim())).filter(x=>x>=1 && x<=n);
    target = new Set(arr.slice(0,k));
  } else {
    target = new Set(randomCombination(n,k));
  }
  document.getElementById('targetDisplay').innerHTML =
    'ğŸ¯ Ù†ØªÛŒØ¬Ù‡ Ù„Ø§ØªØ§Ø±ÛŒ: ' + [...target].sort((a,b)=>a-b).join(', ');
}

function resetStats(){
  stats = {t:0,c2:0,c3:0,c4:0,c5:0,spent:0,paid:0};
  updateUI();
}

function match(ticket){
  let c=0; for(let n of ticket) if(target.has(n)) c++;
  return c;
}

function updateUI(){
  document.getElementById('tickets').textContent = stats.t;
  document.getElementById('c2').textContent = stats.c2;
  document.getElementById('c3').textContent = stats.c3;
  document.getElementById('c4').textContent = stats.c4;
  document.getElementById('c5').textContent = stats.c5;
  document.getElementById('spent').textContent = stats.spent.toLocaleString();
  document.getElementById('paid').textContent = stats.paid.toLocaleString();
  const net = stats.paid - stats.spent;
  const netEl = document.getElementById('net');
  netEl.textContent = net.toLocaleString();
  netEl.style.color = net>=0 ? '#8aff8a' : '#ff8080';
}

async function start(){
  if(running) return;
  running = true;
  const n = +document.getElementById('maxNumber').value;
  const k = +document.getElementById('countPerTicket').value;
  const price = +document.getElementById('ticketPrice').value;
  const prize2 = +document.getElementById('prize2').value;
  const prize3 = +document.getElementById('prize3').value;
  const prize4 = +document.getElementById('prize4').value;
  const prize5 = +document.getElementById('prize5').value;

  while(running){
    const ticket = randomCombination(n,k);
    const m = match(ticket);
    stats.t++;
    stats.spent += price;
    if(m==2){stats.c2++; stats.paid += prize2;}
    if(m==3){stats.c3++; stats.paid += prize3;}
    if(m==4){stats.c4++; stats.paid += prize4;}
    if(m==5){stats.c5++; stats.paid += prize5;}
    if(stats.t % 100 === 0) updateUI(); // Ù‡Ø± Û±Û°Û° Ø¨Ù„ÛŒØ· Ø¢Ù¾Ø¯ÛŒØª UI
    await new Promise(r=>setTimeout(r,0)); // Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù‚ÙÙ„ Ø´Ø¯Ù† UI
  }
}

document.getElementById('setTarget').onclick = pickTarget;
document.getElementById('start').onclick = ()=>{pickTarget(); start();};
document.getElementById('stop').onclick = ()=>{running=false; updateUI();};
pickTarget();
updateUI();
</script>
</body>
</html>
